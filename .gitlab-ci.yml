merge-and-push:
  stage: test
  tags:
    - fe-shell
  script:
    - whoami
    - echo "合并请求到 v1.x 分支，开始验证..."
    - echo "代码验证通过"
    - echo "推送代码到 github..."
    - if [ "$(git remote add github git@github.com:FED-CLUB/example.git)" ]; then echo "ok"; fi;
    - git config user.name fed-bot
    - git config user.email fed-bot@isyscore.com
    - git checkout v1.x
    - git pull origin v1.x
    - git push --set-upstream github v1.x
    - echo "推送成功"
  only:
    - v1.x
    - merge_requests